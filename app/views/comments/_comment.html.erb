<div id="comment-<%= comment.id %>">
  <% if !comment.user.nil? %>
    <%= link_to gravatar_for(comment.user, size: 50), comment.user%>
    <div class="user"><%= link_to comment.user.name, comment.user%></div>
    <div class="content">
      <%= comment.content %>
    </div>
    <div class="timestamp">
      Posted <%= time_ago_in_words(comment.created_at) %> ago.
    </div>
    <% if current_user?(comment.user) %>
      <a class="btn " data-toggle="collapse" href="#collapseReactionComment<%=comment.id%>" role="button" aria-expanded="false" aria-controls="collapseReactionComment">
        <i class="far fa-thumbs-up"></i>
        <span hidden="hidden" data="👍" style="margin-left: -12px;">👍</span>
        <span hidden="hidden" data="🥰" style="margin-left: -12px;">🥰</span>
        <span hidden="hidden" data="😆" style="margin-left: -12px;">😆</span>
        <span hidden="hidden" data="😢" style="margin-left: -12px;">😢</span>
        <span hidden="hidden" data="😡" style="margin-left: -12px;">😡</span>
        <span hidden="hidden" data="😱" style="margin-left: -12px;">😱</span>
        <sub>0</sub>
      </a>
      <a class="btn " data-toggle="collapse" href="#collapseComment<%=comment.id%>" role="button" aria-expanded="false" aria-controls="collapseComment">
        comment
      </a>
      <%= link_to "delete", comment, method: :delete, data: { confirm: "You sure?" }, remote: true %>
      <div class="collapse" id="collapseReactionComment<%=comment.id%>">
        <a class="btn reaction-comment" data-control="on"><span>👍</span></a>
        <a class="btn reaction-comment" data-control="on"><span>🥰</span></a>
        <a class="btn reaction-comment" data-control="on"><span>😆</span></a>
        <a class="btn reaction-comment" data-control="on"><span>😢</span></a>
        <a class="btn reaction-comment" data-control="on"><span>😡</span></a>
        <a class="btn reaction-comment" data-control="on"><span>😱</span></a>
      </div>
      <div class="collapse" id="collapseComment<%=comment.id%>">
        <ul class="comments">
          <%= render comment.children_comments if comment.children_comments.present?%> 
        </ul>
        <ul>
          <%= form_for(Comment.new(), html: {method: 'post', multipart: true , remote: true }) do |f| %>
            <%= render 'shared/error_messages', object: f.object %>
            <div><%= hidden_field_tag "comment[micropost_id]", comment.micropost.id %></div>
            <div><%= hidden_field_tag "comment[parent_comment_id]", comment.id %></div>
            <div class="field row">
              <div class="col-sm-10">
                <%= f.text_area :content, placeholder: "Compose new micropost...", id: "comment#{comment.id}_content" %>
              </div>
              <div class="col-sm-2">
                <%= f.submit "Post", class: "btn btn-primary" %>
              </div>
            </div>
          <% end %>
        </ul> 
      </div>
    <% end %>
  <% end %>
</div>
